@model retailCLDVportal.Models.ProductEntity
@{
    ViewData["Title"] = "Product Details";
    decimal? price = Model.PriceCents.HasValue ? Model.PriceCents.Value / 100m : null;
}

<div class="page-container p-4" style="background: linear-gradient(135deg, #0d47a1, #1976d2); min-height: 100vh; color: #fff;">
    <div class="container bg-white text-dark rounded shadow-lg p-4">
        <h2 class="mb-4"> Product Details</h2>

        <div class="row g-4">
            <!-- Media Section -->
            <div class="col-lg-4 text-center">
                @if (!string.IsNullOrWhiteSpace(Model.MediaUrl) && (Model.MediaContentType?.StartsWith("image/") ?? false))
                {
                    <img src="@Model.MediaUrl" class="img-fluid rounded shadow-sm border" alt="product media" />
                }
                else if (!string.IsNullOrWhiteSpace(Model.MediaUrl))
                {
                    <a href="@Model.MediaUrl" target="_blank" class="btn btn-outline-primary">Open Media</a>
                }
                else
                {
                    <div class="text-muted fst-italic">No media uploaded</div>
                }
            </div>

            <!-- Product Info Section -->
            <div class="col-lg-8">
                <dl class="row">
                    <dt class="col-sm-3 fw-bold">Name</dt>
                    <dd class="col-sm-9">@Model.Name</dd>
                    <dt class="col-sm-3 fw-bold">Category</dt>
                    <dd class="col-sm-9">@Model.Category</dd>
                    <dt class="col-sm-3 fw-bold">Price</dt>
                    <dd class="col-sm-9">@((price.HasValue ? $"R {price:0.00}" : "N/A"))</dd>
                    <dt class="col-sm-3 fw-bold">Stock</dt>
                    <dd class="col-sm-9">@Model.StockQuantity</dd>
                    <dt class="col-sm-3 fw-bold">Available</dt>
                    <dd class="col-sm-9">
                        @((Model.IsAvailable ?? ((Model.StockQuantity ?? 0) > 0))
                                                ? "<span class='badge bg-success'>Yes</span>"
                                                : "<span class='badge bg-danger'>No</span>")
                    </dd>
                    <dt class="col-sm-3 fw-bold">Description</dt>
                    <dd class="col-sm-9">@Model.Description</dd>
                </dl>

                <div class="d-flex gap-2 mt-4">
                    <a class="btn btn-primary" asp-action="Edit" asp-route-pk="@Model.PartitionKey" asp-route-rk="@Model.RowKey">
                        ?? Edit
                    </a>
                    <a class="btn btn-outline-secondary" asp-action="Index">? Back</a>
                </div>
            </div>
        </div>
    </div>
</div>
